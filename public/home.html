<!DOCTYPE html>

<head>
  <title>Home</title>

  <link rel="icon" type="image/png" href="res/logo0_colored.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/home.css" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/createpost.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
  />

  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover"
  />

  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>
</head>

<body>
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
      >&times;</a
    >
    <a href="aboutus.html">About</a>
    <a href="settings.html">Settings</a>
    <a href="FAQ.html">FAQ</a>
    <a href="contact-us.html">Contact us</a>
    <a href="partnerwithus.html">Partner with us</a>
    <a href="donate.html">Donate</a>
    <a href="reportbug.html">Report a bug</a>
  </div>
  <navbar class="nav">
    <ul class="nav__list">
      <li class="nav__item">
        <a href="home.html" class="current-page">
          <svg viewBox="0 0 1024 1024" width="100" title="home">
            <path
              d="M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3c0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8c24.9-25 24.9-65.5-.1-90.5z"
            />
          </svg>
          <p class="nav__itemlabel">Home</p>
        </a>
      </li>

      <li class="nav__item">
        <a href="bulletin-board.html">
          <svg viewBox="0 0 24 24" width="100" title="bulletin-board">
            <path
              d="M3 11c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2s2-.9 2-2v-7c0-1.1-.9-2-2-2zm7-5.7C10 3.45 11.45 2 13.3 2c1.04 0 2.05.49 2.7 1.25c.65-.76 1.66-1.25 2.7-1.25C20.55 2 22 3.45 22 5.3c0 2.1-2.5 4.51-5.33 7.09a1 1 0 0 1-1.35 0C12.5 9.81 10 7.4 10 5.3M19.99 17h-6.83a.96.96 0 0 1-.33-.06l-1.47-.51a.49.49 0 0 1-.3-.63c.09-.26.38-.4.64-.3l1.12.43c.11.04.24.07.36.07h2.63c.65 0 1.18-.53 1.18-1.18c0-.49-.31-.93-.77-1.11L9.3 11.13c-.22-.09-.46-.13-.7-.13H7v9.02l6.37 1.81c.41.12.85.1 1.25-.05L22 19c0-1.11-.9-2-2.01-2z"
            />
          </svg>
          <p class="nav__itemlabel">Volunteer</p>
        </a>
      </li>

      <li class="nav__item">
        <a href="messages.html">
          <svg viewBox="0 0 24 24" width="100" title="messages">
            <path
              d="M9.46 4.332C10.74 2.913 12.746 2 15 2c3.866 0 7 2.686 7 6c0 1.989-1.13 3.752-2.868 4.844a2.826 2.826 0 0 1-.132.076v4.05a1 1 0 0 1-1.718.696l-1.14-1.174c1.069-1.264 1.698-2.816 1.698-4.493c0-4.067-3.698-7.395-8.38-7.667z"
            />
            <path
              d="M10.385 17.886l-3.667 3.78A1 1 0 0 1 5 20.97v-4.05a2.826 2.826 0 0 1-.132-.076C3.129 15.752 2 13.989 2 12c0-3.314 3.134-6 7-6s7 2.686 7 6c0 2.726-2.121 5.028-5.026 5.758a8.17 8.17 0 0 1-.589.128z"
            />
          </svg>
          <p class="nav__itemlabel">Messages</p>
        </a>
      </li>

      <li class="nav__item">
        <a href="notifications.html">
          <svg viewBox="0 0 24 24" width="100" title="notifications">
            <path
              d="M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"
            />
          </svg>
          <p class="nav__itemlabel">Notifications</p>
        </a>
      </li>
      <li class="nav__item">

        <a href="profile.html">
          <svg viewBox="0 0 16 16" width="100" title="profile">
            <path
              d="M3 14s-1 0-1-1s1-4 6-4s6 3 6 4s-1 1-1 1H3zm5-6a3 3 0 1 0 0-6a3 3 0 0 0 0 6z"
            />
          </svg>
          <p class="nav__itemlabel">Profile</p>
        </a>
      </li>

      <li class="nav__item hide-in-mobile">
        <a id="create-btn">
          <svg viewBox="0 0 32 32" width="100" title="create">
            <path
              d="M16 2A14.172 14.172 0 0 0 2 16a14.172 14.172 0 0 0 14 14a14.172 14.172 0 0 0 14-14A14.172 14.172 0 0 0 16 2zm8 15h-7v7h-2v-7H8v-2h7V8h2v7h7z"
            />
          </svg>
          <p class="nav__itemlabel">Create</p>
        </a>
      </li>
      <li class="nav__item hide-in-mobile dropdown">
        <a href="#">
          <svg viewBox="0 0 24 24" width="100" title="menu">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2zm0 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2zm0 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2z"
            />
          </svg>
          <p class="nav__itemlabel">Menu</p>
          <div class="dropdown-content">
            <a href="aboutus.html">About</a>
            <a href="settings.html">Settings</a>
            <a href="FAQ.html">FAQ</a>
            <a href="contact-us.html">Contact us</a>
            <a href="partnerwithus.html">Partner with us</a>
            <a href="donate.html">Donate</a>
            <a href="reportbug.html">Report a bug</a>
          </div>
        </a>
      </li>
    </ul>
  </navbar>


  <div class="main" id="main">
    <div class="menu-and-search">
      <div class="mobile-menu" onclick="openNav()">
        <a href="#">
          <svg viewBox="0 0 24 24" width="100" title="menu">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2zm0 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2zm0 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2z"
            />
          </svg>
        </a>
      </div>

      <div id="above-search" class="search">
        <form class="search-form">
          <input id="search-texts" type="search" placeholder="Search" />
          <button id="search-button"><i class="fa fa-search"></i></button>
        </form>
      </div>
    </div>

    <div id="post-btn" class="post-btn">
      <img width="60px" height="60px" src="images/mobilepost.png">
    </div>


    <div id="modalOverlay">
      <div class="postModalBackground" id="postModalBackground"></div>
      <div class="create-post-container modal-content" id="createPostModal">
          <div class="image-poster profilepicture">
            <img src="images/placeholder2.png" />
          </div>
          <div class="newCaption">
            <div>
              <textarea rows="4" cols="50">
                Write a caption here...
              </textarea>
            </div>
            <div style="font-size: 2.5rem" class="icons">
              <i id="photo" class="fa fa-image"></i>
              <i id="marker" class="fas fa-map-marker-alt"></i>
              <i id="myBtn" class="fas fa-users"></i>
              <input type="file" id="file" style="display: none" />
            </div>
            <div class="button">
              <button id="postBtn" class="secondarybutton">Post</button>
            </div>
          </div>
      </div>
    </div>
  
      <!-- The Modal -->
      <div id="locationModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <textarea id="location" rows="4" cols="50">
        Add a location here...
      </textarea>
        </div>
      </div>
  
      <!-- The Modal -->
      <div id="tagPeopleModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <textarea id="tags" rows="4" cols="50">
            Tag people here...
          </textarea>
        </div>
      </div>

  

    <div class="flex-main">
      <div class="column" id="mainmain">
        <h1 class="heading1 heading-title">Home123</h1>
        <div id="stories" class="stories"></div>
        <div id="posts" class="posts"></div>

      </div>

      <div class="column" id="sidemain">
        <div class="search">
          <form class="search-form">
            <input id ="search-input" type="text" placeholder="Search" />
            <button id = "searchbar" onclick="findUsers()" type="button"><i class="fa fa-search"></i></button>
          </form>
        </div>
        <div id="whats-new" class="whats-new">
          <h1 id="whats-new-title">What's new?</h1>
          <p id="recommended-title" class="">
            Recommended volunteering opportunities for you
          </p>
          <div id="whats-new-volunteering-opportunities"></div>
        </div>
        <div id="recommended-connections" class="recommended-connections">
          <h1 id="whoto">Who to connect with</h1>
          <div id="recommendedUserDiv"></div>
        </div>
      </div>
    </div>
  </div>

</body>
<script src="js/like.js"></script>
<script>
    // Get the modal
    var modal = document.getElementById("locationModal");

    // Get the button that opens the modal
    var btn = document.getElementById("marker");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn.onclick = function () {
      modal.style.display = "block";
    };

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.style.display = "none";
    };

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    };
  </script>

  <script>
    // Get the modal
    var modal = document.getElementById("tagPeopleModal");

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn.onclick = function () {
      modal.style.display = "block";
      console.log("pepe")
    };

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.style.display = "none";
    };

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    };
  </script>

<script>
  function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
  }

  function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
  }
</script>



<script>
    // Get the modal
    var modal = document.getElementById("postModalBackground");
    var content = document.getElementById("createPostModal");

    // Get the button that opens the modal
    var btn = document.getElementById("post-btn");

    var createBtn = document.getElementById("create-btn");

    // When the user clicks the button, open the modal
    btn.onclick = function() {
      modal.style.display = "block";
      modal.onclick = () => {
        modal.style.display = "none";
        modal.onclick = "";
        content.style.display = "none"
      }
      content.style.display = "flex";
    }

    createBtn.onclick = function() {
      modal.style.display = "block";
      modal.onclick = () => {
        modal.style.display = "none";
        modal.onclick = "";
        content.style.display = "none"
      }
    }
    </script>


<script
    src="https://kit.fontawesome.com/2ec3384389.js"
    crossorigin="anonymous"
  ></script>

<script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    crossorigin="anonymous"
  ></script>

  <script src="js/home.js"></script>
<script>
    $(function () {
      $("#photo").click(function () {
        $("#file").click();
      });
      $("#file").on("change", function () {
        if (event.target.files.length == 0) {
          return;
        }
        $("#photo").attr("src", URL.createObjectURL(event.target.files[0]));
      });
      $("button").click(function () {
        input_fields = ["pic_id"];

        var storageRef = firebase.storage().ref();
        file = $("#file")[0].files[0];
        var user = firebase.auth().currentUser;
        // Create a reference to the '.jpg'
        var photoRef = storageRef.child(
          "/images/" + user + "/profilePicture" + file.name
        );
        photoRef
          .put(file)
          .then(function (snapshot) {
            var usersRef = db.collection("images");
            usersRef
              .doc(uid)
              .set({
                pic_id: uid,
              })
              .then(function () {
                console.log("Document successfully written!");
                alert("Document successfully written!");
                // location.href = 'profile.html';
              })
              .catch(function (error) {
                console.error("Error writing document: ", error);
              });
          })
          .catch(function (error) {
            console.error("Error writing document: ", error);
          });
      });

      // Points to the root reference
      // var storageRef = firebase.storage().ref();

      // // Points to 'images'
      // var imagesRef = storageRef.child('images');

      // // Points to 'images/space.jpg'
      // // Note that you can use variables to create child values
      // var fileName = 'space.jpg';
      // var spaceRef = imagesRef.child(fileName);

      // // File path is 'images/space.jpg'
      // var path = spaceRef.fullPath

      // // File name is 'space.jpg'
      // var name = spaceRef.name

      // // Points to 'images'
      // var imagesRef = spaceRef.parent;
    });
    // var uid;
    // firebase.auth().onAuthStateChanged(function (user) {
    //   if (user) {
    //     console.log("signed in");
    //     if (user != null) {
    //       name = user.displayName;
    //       email = user.email;
    //       //photoUrl = user.photoURL;
    //       uid = user.uid;
    //       $("#name").val(name);
    //       $("#email").val(email);
    //       db.collection("images")
    //         .where("pic_id", "==", uid)
    //         .get()
    //         //data is retrieved from the collection "users" and
    //         //sent to the main.html. This would include the user type
    //         // (barber or customer), their name, exp, age, gender, etc
    //         .then(function (querySnapshot) {
    //           if (querySnapshot.size > 0) {
    //             //location.href = 'profile.html';
    //           }
    //           // querySnapshot.forEach(function (doc) {
    //           //     // doc.data() is never undefined for query doc snapshots
    //           //     console.log(doc.id, " => ", doc.data());
    //           // });
    //         })
    //         .catch(function (error) {
    //           console.log("Error getting documents: ", error);
    //         });
    //     }
    //   } else {
    //     console.log("not signed");
    //     location.href = "sign-up.html";
    //     // No user is signed in.
    //   }
    // });
  </script>




<script src="js/search.js"></script>



<script src="js/createpost.js"></script>







</html>